@model MarketGid.Core.Models.Advertisement

@if (Model.MimeType.Contains("video")) {
	<video id="@Model.CurrentPlace" preload autoplay width="1040" height="385" style="background: #000">
		<source src="@Url.Content(Model.Uri)" type="@Model.MimeType" />
	</video>
} else if (Model.MimeType.Contains("image")) {
	<img id="@Model.CurrentPlace" src="@Url.Content(Model.Uri)" alt="@Model.Name" class="animated fadeIn" />
}

@if (IsAjax) {
	<script type="text/javascript">
		setTimeout(function () { rotate('@Model.CurrentPlace'); }, @Model.Duration.TotalMilliseconds);
		// отсылаем данные в GA
		if (_gaq) {
			var catName = 'Изображение';
			@if (Model.MimeType.Contains("video")) {
			<text>catName = 'Видео';</text>
			}
			_gaq.push(['_trackEvent', catName, 'Show', '@Model.Name']);
		}

		$('#@Model.CurrentPlace').on('click tap', function () {
			if (_gaq) {
				_gaq.push(['_trackEvent', '', 'Click', '@Model.Name']);
			}
			window.location = '@Url.Content("~/Main/Map/" + Model.ObjectId)';
		});
	</script>
}

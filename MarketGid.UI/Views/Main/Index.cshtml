@using MarketGid.Core.Models

@{
	Layout = "~/Views/Shared/_MainLayout.cshtml";
}
<div class="main-header">
	<img src="@Url.Content(ViewBag.TopAdvertisement.Uri)" alt="top advertisement" />
</div>
<div class="main-content">
	<div class="title">
		<a href="/" id="back-link"><img src="~/Content/images/black_arrow_left.png" alt="Back" /></a> МОСФИЛЬМ
	</div>
	<div class="main-container">
		<div class="main-menu" style="padding-left: 110px;">
			<form class="form-inline" style="margin-left: 0px;">
				<input type="text" style="width: 885px; height: auto; font-size: 1.9em; line-height: normal; color: white" placeholder="Введите название или услугу..." id="ipad" />
				
			</form>
			<ul class="thumbnails">
				@foreach (Category category in ViewBag.Categories) {
					<li class="mgid-tile">
						<div class="thumbnail mgid-thumb" data-category="@category.Id">
							<h3>@category.Name</h3>
							<p></p>
						</div>
					</li>
				}
			</ul>
		</div>
	</div>
</div>
<div class="main-footer">
	<img src="@Url.Content(ViewBag.BottomAdvertisement.Uri)" alt="bottom advertisement" />
</div>
<script type="text/javascript">
	function initThumbs()
	{
		$('.mgid-thumb').mousedown( function () {
			$(this).toggleClass('clicked');
		});
		$('.mgid-thumb').mouseup( function () {
			$(this).toggleClass('clicked');
			fadeOut('.thumbnails');
			$.get('@Url.Content("~/main/category/")' + $(this).data('category'), function (data) {
				$('.thumbnails').html(data);
				//initThumbs();
				$('#back-link').attr('href', '#');
				$('#back-link').data('state', 'onpage');
				fadeIn('.thumbnails');
			});
			//window.location.href = '@Url.Content("~/map/item/1")';
		});
	}

	$(document).ready(function () {
		// init link
		$('#back-link').data('state', 'outpage');
		$('#back-link').click(function () {
			var link = $(this);
			if (link.data('state') == 'onpage') {
				fadeOut('.thumbnails');
				$.get('@Url.Content("~/main/category/")', function (data) {
					$('.thumbnails').html(data);
					initThumbs();
					link.attr('href', '@Url.Content("~/home")');
					link.data('state', 'outpage');
					fadeIn('.thumbnails');
				});
			} else {
				fadeOut('body');
			}
		});

		// init thumbnails
		initThumbs();

		// init virtual keyboard
		$('#ipad').keyboard({ 
 		    display: { 
		        'bksp'   :  "\u2190", 
		        'accept' : 'Поиск', 
		        'default': 'ABC', 
		        'meta1'  : '.?123', 
		        'meta2'  : '#+=',
		        'enter'  : 'Поиск'
		    }, 
		    layout: 'custom', 
		    customLayout: { 
		        'default': [ 
		            'q w e r t y u i o p {bksp}', 
		            'a s d f g h j k l {accept}', 
		            '{s} z x c v b n m , . {s}', 
		            '{meta1} {space} {meta1}' 
		        ], 
		        'shift': [ 
		            'Q W E R T Y U I O P {bksp}', 
		            'A S D F G H J K L {accept}', 
		            '{s} Z X C V B N M ! ? {s}', 
		            '{meta1} {space} {meta1}' 
		        ], 
		        'meta1': [ 
		            '1 2 3 4 5 6 7 8 9 0 {bksp}', 
		            '- / : ; ( ) \u20ac & @@ {accept}', 
		            '{meta2} . , ? ! \' " {meta2}', 
		            '{default} {space} {default}' 
		        ], 
		        'meta2': [ 
		            '[ ] { } # % ^ * + = {bksp}', 
		            '_ \\ | ~ < > $ \u00a3 \u00a5 {accept}', 
		            '{meta1} . , ? ! \' " {meta1}', 
		            '{default} {space} {default}' 
		        ] 
		    } 
		});
	});
</script>
